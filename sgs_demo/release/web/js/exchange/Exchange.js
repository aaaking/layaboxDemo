var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),Exchange=function(t){function e(){var e=t.call(this)||this;e._names=["魏","蜀","吴","群","全部"],e._mask.width=Laya.stage.width,e._mask.height=Laya.stage.height,e._mask.on(Laya.Event.CLICK,e,e.onTouch),e._btnBack.on(Laya.Event.CLICK,e,e.onTouch),Laya.stage.on(Laya.Event.RESIZE,e,e.onResize),e._tab.removeChildren(),e._tab.initItems();for(var n=0;n<5;n++){var a=new Laya.Button;a.skin="menu/btn_4.png",a.stateNum=2,a.label=e._names[n],a.labelColors="#e2eff7,#e2eff7,#e2eff7,#e2eff7",a.labelSize=30,a.name="item"+n,e._tab.addItem(a),a.x=0,a.y=99*n}return e._tab.selectHandler=new Laya.Handler(e,e.checkTab),e._tab.selectedIndex=4,e.checkTab(),Dispatcher.on("updateInfo",e,e.updateInfo),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.show=function(t){var n=this;t&&!e.instance.parent&&t.addChild(e.instance),ExchangeManager.instance.testInitCards(function(){n._list.itemRender=ExchangeCard,n._list.scrollBar.visible=!1,n._list.renderHandler=new Laya.Handler(n,n.updateList),n._list.array=ExchangeManager.instance.cards,n.onResize(null)})},e.prototype.updateInfo=function(){var t=this;ExchangeManager.instance.testInitCards(function(){t._list.array=ExchangeManager.instance.cards})},e.prototype.onTouch=function(t){switch(t.currentTarget){case this._btnBack:this.removeSelf()}},e.prototype.setList=function(t){this._list.array=WareHouseManager.instance.getCardsByCamp(t)},e.prototype.updateList=function(t,e){t.updata()},e.prototype.onResize=function(t){void 0===t&&(t=null),this.width=Laya.stage.width,this.height=Laya.stage.height;var e=Math.floor((this.width-190-196)/224);this._list.width=224*e+196,this._list.x=this.width-this._list.width>>1},e.prototype.checkTab=function(){this.setList(this._tab.selectedIndex+1)},e}(ui.exchange.ExchangeViewUI);